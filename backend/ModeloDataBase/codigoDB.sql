-- MySQL Script generated by MySQL Workbench
-- sáb 29 oct 2016 05:30:57 COT
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema MT22q13_DB
-- -----------------------------------------------------
DROP SCHEMA IF EXISTS `MT22q13_DB` ;

-- -----------------------------------------------------
-- Schema MT22q13_DB
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `MT22q13_DB` DEFAULT CHARACTER SET utf8 COLLATE utf8_spanish_ci ;
-- -----------------------------------------------------
-- Schema Scrum_DB
-- -----------------------------------------------------
USE `MT22q13_DB` ;

-- -----------------------------------------------------
-- Table `MT22q13_DB`.`role`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `MT22q13_DB`.`role` ;

CREATE TABLE IF NOT EXISTS `MT22q13_DB`.`role` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MT22q13_DB`.`user`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `MT22q13_DB`.`user` ;

CREATE TABLE IF NOT EXISTS `MT22q13_DB`.`user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `names` VARCHAR(100) NOT NULL,
  `lastNames` VARCHAR(50) CHARACTER SET 'utf8' NOT NULL,
  `fullName` VARCHAR(100) NOT NULL,
  `documentType` VARCHAR(100) NOT NULL,
  `documentNumber` VARCHAR(45) NOT NULL,
  `cellPhoneNumber` VARCHAR(45) NOT NULL,
  `telephoneNumber` VARCHAR(45) NOT NULL,
  `email` VARCHAR(45) NOT NULL,
  `idRole` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_role1_idx` (`idRole` ASC),
  CONSTRAINT `fk_user_role1`
    FOREIGN KEY (`idRole`)
    REFERENCES `MT22q13_DB`.`role` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = dec8;


-- -----------------------------------------------------
-- Table `MT22q13_DB`.`module`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `MT22q13_DB`.`module` ;

CREATE TABLE IF NOT EXISTS `MT22q13_DB`.`module` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MT22q13_DB`.`access`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `MT22q13_DB`.`access` ;

CREATE TABLE IF NOT EXISTS `MT22q13_DB`.`access` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `idUser` INT NOT NULL,
  `nickName` VARCHAR(100) NOT NULL,
  `password` VARCHAR(100) NOT NULL,
  `state` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_access_user1_idx` (`idUser` ASC),
  CONSTRAINT `fk_access_user1`
    FOREIGN KEY (`idUser`)
    REFERENCES `MT22q13_DB`.`user` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `MT22q13_DB`.`userModules`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `MT22q13_DB`.`userModules` ;

CREATE TABLE IF NOT EXISTS `MT22q13_DB`.`userModules` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `idUser` INT NOT NULL,
  `idModule` INT NOT NULL,
  `state` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_userModules_user1_idx` (`idUser` ASC),
  INDEX `fk_userModules_module1_idx` (`idModule` ASC),
  CONSTRAINT `fk_userModules_user1`
    FOREIGN KEY (`idUser`)
    REFERENCES `MT22q13_DB`.`user` (`id`)
    ON DELETE CASCADE
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_userModules_module1`
    FOREIGN KEY (`idModule`)
    REFERENCES `MT22q13_DB`.`module` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `MT22q13_DB`.`role`
-- -----------------------------------------------------
START TRANSACTION;
USE `MT22q13_DB`;
INSERT INTO `MT22q13_DB`.`role` (`id`, `name`) VALUES (1, 'SuperAdmin');
INSERT INTO `MT22q13_DB`.`role` (`id`, `name`) VALUES (2, 'Admin');
INSERT INTO `MT22q13_DB`.`role` (`id`, `name`) VALUES (3, 'Jefe Area');
INSERT INTO `MT22q13_DB`.`role` (`id`, `name`) VALUES (4, 'Empleado');

COMMIT;


-- -----------------------------------------------------
-- Data for table `MT22q13_DB`.`user`
-- -----------------------------------------------------
START TRANSACTION;
USE `MT22q13_DB`;
INSERT INTO `MT22q13_DB`.`user` (`id`, `names`, `lastNames`, `fullName`, `documentType`, `documentNumber`, `cellPhoneNumber`, `telephoneNumber`, `email`, `idRole`) VALUES (1, 'Harold Daniel', 'Duque', 'Harold Daniel Duque Castañeda', 'CC', '1033726983', '3178280143', '12345621', 'hdduquec@gmail.com', 1);
INSERT INTO `MT22q13_DB`.`user` (`id`, `names`, `lastNames`, `fullName`, `documentType`, `documentNumber`, `cellPhoneNumber`, `telephoneNumber`, `email`, `idRole`) VALUES (2, 'Andres Fernando', 'Angarita', 'Andres Fernando Angarita', 'CC', '1237187434', '3198280344', '12345678', 'andres@gmail.com', 4);

COMMIT;


-- -----------------------------------------------------
-- Data for table `MT22q13_DB`.`module`
-- -----------------------------------------------------
START TRANSACTION;
USE `MT22q13_DB`;
INSERT INTO `MT22q13_DB`.`module` (`id`, `name`) VALUES (1, 'Users');
INSERT INTO `MT22q13_DB`.`module` (`id`, `name`) VALUES (2, 'Client');
INSERT INTO `MT22q13_DB`.`module` (`id`, `name`) VALUES (3, 'Reports');

COMMIT;


-- -----------------------------------------------------
-- Data for table `MT22q13_DB`.`access`
-- -----------------------------------------------------
START TRANSACTION;
USE `MT22q13_DB`;
INSERT INTO `MT22q13_DB`.`access` (`id`, `idUser`, `nickName`, `password`, `state`) VALUES (1, 1, '81dc9bdb52d04dc20036dbd8313ed055', '81dc9bdb52d04dc20036dbd8313ed055', 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `MT22q13_DB`.`userModules`
-- -----------------------------------------------------
START TRANSACTION;
USE `MT22q13_DB`;
INSERT INTO `MT22q13_DB`.`userModules` (`id`, `idUser`, `idModule`, `state`) VALUES (1, 1, 1, 1);
INSERT INTO `MT22q13_DB`.`userModules` (`id`, `idUser`, `idModule`, `state`) VALUES (2, 1, 2, 1);
INSERT INTO `MT22q13_DB`.`userModules` (`id`, `idUser`, `idModule`, `state`) VALUES (3, 1, 3, 1);
INSERT INTO `MT22q13_DB`.`userModules` (`id`, `idUser`, `idModule`, `state`) VALUES (4, 2, 1, 2);
INSERT INTO `MT22q13_DB`.`userModules` (`id`, `idUser`, `idModule`, `state`) VALUES (5, 2, 2, 2);
INSERT INTO `MT22q13_DB`.`userModules` (`id`, `idUser`, `idModule`, `state`) VALUES (6, 2, 3, 2);

COMMIT;

